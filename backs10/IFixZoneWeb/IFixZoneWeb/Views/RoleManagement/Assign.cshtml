@model IFixZoneWeb.Models.Entities.User
@using IFixZoneWeb.Models.Entities

@{
    Layout = "_AdminLayout";
    ViewData["Title"] = "Phân quyền người dùng";
    var allRoles = (List<Role>)ViewBag.AllRoles;
}

<h4 class="fw-bold mb-3">
    <i class="fa-solid fa-shield"></i>
    Phân quyền cho: <span class="text-primary">@Model.Username</span>
</h4>

@if (TempData["Error"] != null)
{
    <div class="alert alert-danger">@TempData["Error"]</div>
}

<form method="post">
    @Html.AntiForgeryToken()

    @foreach (var r in allRoles)
    {
        <div class="form-check mb-2">
            <input class="form-check-input"
                   type="checkbox"
                   name="roleIds"
                   value="@r.RoleId"
                   @(Model.Roles.Any(x => x.RoleId == r.RoleId) ? "checked" : "") />

            <label class="form-check-label fw-semibold">
                @r.RoleName
            </label>
        </div>
    }

    <button class="btn btn-success mt-3">
        <i class="fa fa-save me-1"></i> Lưu
    </button>

    <a asp-action="Index" class="btn btn-secondary mt-3">
        Hủy
    </a>
</form>
<style>
    /* ===============================
       ADMIN – ASSIGN ROLE PAGE
       =============================== */

    /* ===== PAGE TITLE ===== */
    h4.fw-bold {
        font-size: 20px;
        font-weight: 800;
        color: #111827;
        display: flex;
        align-items: center;
        gap: 8px;
    }

        h4.fw-bold i {
            color: #16a34a;
            font-size: 18px;
        }

    /* ===== CARD CONTAINER ===== */
    form {
        background: #ffffff;
        border-radius: 14px;
        border: 1px solid #e5e7eb;
        padding: 20px 22px;
        max-width: 520px;
    }

    /* ===== ALERT ===== */
    .alert-danger {
        border-radius: 10px;
        font-size: 14px;
    }

    /* ===== ROLE CHECKBOX LIST ===== */
    .form-check {
        background: #f9fafb;
        border: 1px solid #e5e7eb;
        border-radius: 10px;
        padding: 10px 14px;
        transition: all 0.2s ease;
    }

        .form-check:hover {
            background: #f1f5f9;
            border-color: #c7d2fe;
        }

    /* ===== CHECKBOX ===== */
    .form-check-input {
        width: 18px;
        height: 18px;
        cursor: pointer;
        margin-top: 0.25rem;
    }

        .form-check-input:checked {
            background-color: #2563eb;
            border-color: #2563eb;
        }

    /* ===== LABEL ===== */
    .form-check-label {
        font-size: 14px;
        color: #111827;
        cursor: pointer;
        margin-left: 6px;
    }

    /* ===== ACTION BUTTONS ===== */
    button.btn-success {
        background: #16a34a;
        border: none;
        font-weight: 700;
        padding: 8px 20px;
        border-radius: 10px;
        transition: all 0.2s ease;
    }

        button.btn-success:hover {
            background: #15803d;
            transform: translateY(-1px);
            box-shadow: 0 8px 20px rgba(22, 163, 74, 0.35);
        }

    a.btn-secondary {
        margin-left: 8px;
        border-radius: 10px;
        padding: 8px 20px;
        font-weight: 600;
    }

    /* ===== RESPONSIVE ===== */
    @@media (max-width: 768px) {
        form

    {
        padding: 16px;
    }

    h4.fw-bold {
        font-size: 18px;
    }

    }
</style>