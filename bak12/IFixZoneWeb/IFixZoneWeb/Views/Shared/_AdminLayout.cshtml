@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor Http
@{
    var name = Http.HttpContext?.Session.GetString("FullName") ?? "Admin";
    string currentController = ViewContext.RouteData.Values["controller"]?.ToString() ?? "";
    string currentAction = ViewContext.RouteData.Values["action"]?.ToString() ?? "";
    string Active(string c) => currentController == c ? "active" : "";
}

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - iFixZone Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <style>
        html, body {
            height: 100%;
            margin: 0;
            background: #f3f4f6;
        }

        .admin-wrapper {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 260px;
            background: #111827;
            color: #e2e8f0;
            position: fixed;
            top: 0;
            left: 0;
            height: 100%;
            overflow-y: auto;
            box-shadow: 4px 0 15px rgba(0,0,0,0.2);
            z-index: 1000;
        }

        .sidebar-header {
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid #374151;
            background: #0f172a;
        }

            .sidebar-header h4 {
                margin: 0;
                color: #fff;
                font-weight: bold;
            }

        .sidebar-group {
            padding: 15px 20px 5px;
            font-size: 0.8rem;
            color: #94a3b8;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        .sidebar a {
            color: #cbd5e1;
            text-decoration: none;
            padding: 12px 20px;
            display: flex;
            align-items: center;
            transition: all 0.2s ease;
            border-left: 3px solid transparent;
        }

            .sidebar a:hover {
                background: #1e293b;
                color: #fff;
                border-left-color: #3b82f6;
            }

        .sidebar .active {
            background: #1e40af;
            color: #fff;
            font-weight: 500;
            border-left-color: #3b82f6;
        }

        .sidebar a i {
            width: 24px;
            text-align: center;
            margin-right: 12px;
            font-size: 1.1rem;
        }

        .main-content-wrapper {
            flex: 1;
            margin-left: 260px; /* Đẩy nội dung sang phải sidebar */
            display: flex;
            flex-direction: column;
        }

        .topbar {
            background: #fff;
            padding: 15px 30px;
            border-bottom: 1px solid #e5e7eb;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            display: flex;
            justify-content: flex-end;
            align-items: center;
        }

            .topbar .user-info {
                font-size: 1rem;
                color: #374151;
            }

                .topbar .user-info i {
                    color: #3b82f6;
                    margin-right: 8px;
                }

        .page-content {
            flex: 1;
            padding: 30px;
            background: #f3f4f6;
        }

        /* Scrollbar sidebar */
        .sidebar::-webkit-scrollbar {
            width: 6px;
        }

        .sidebar::-webkit-scrollbar-track {
            background: #1e293b;
        }

        .sidebar::-webkit-scrollbar-thumb {
            background: #475569;
            border-radius: 3px;
        }

        /* Responsive: Ẩn sidebar trên mobile nếu cần (tùy chọn) */
        @@media (max-width: 992px) {
            .sidebar {
                transform: translateX(-260px);
                transition: transform 0.3s ease;
            }

                .sidebar.open {
                    transform: translateX(0);
                }

            .main-content-wrapper {
                margin-left: 0;
            }
            /* Có thể thêm nút toggle menu nếu cần */
        }
    </style>
</head>
<body>
    <div class="admin-wrapper">
        <!-- SIDEBAR - luôn hiện, fixed -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h4>
                    <i class="fa-solid fa-screwdriver-wrench text-warning me-2"></i>
                    iFixZone Admin
                </h4>
            </div>

            <div class="sidebar-group">QUẢN LÝ CƠ BẢN</div>
            <a asp-controller="Admin" asp-action="Dashboard" class="@Active("Admin")">
                <i class="fa-solid fa-gauge-high"></i> Dashboard
            </a>
            <a asp-controller="CategoryAdmin" asp-action="Index" class="@Active("CategoryAdmin")">
                <i class="fa-solid fa-tags"></i> Quản lý danh mục
            </a>
            <a asp-controller="ProductAdmin" asp-action="Index" class="@Active("ProductAdmin")">
                <i class="fa-solid fa-box"></i> Quản lý sản phẩm
            </a>

            <div class="sidebar-group">QUẢN LÝ KHÁCH HÀNG & ĐƠN HÀNG</div>
            <a asp-controller="UserAdmin" asp-action="Index" class="@Active("UserAdmin")">
                <i class="fa-solid fa-users"></i> Quản lý người dùng
            </a>
            <a asp-controller="OrderAdmin" asp-action="Index" class="@Active("OrderAdmin")">
                <i class="fa-solid fa-cart-shopping"></i> Quản lý đơn hàng
            </a>
            <a asp-controller="RoleManagement" asp-action="Index" class="@Active("RoleManagement")">
                <i class="fa-solid fa-user-shield"></i> Quản lý quyền (Role)
            </a>

            <hr class="border-secondary opacity-50 mx-4 my-4" />

            <a asp-controller="Account" asp-action="Logout" class="text-danger">
                <i class="fa-solid fa-right-from-bracket"></i> Đăng xuất
            </a>
        </aside>

        <!-- MAIN CONTENT - nằm bên phải sidebar -->
        <div class="main-content-wrapper">
            <header class="topbar">
                <div class="user-info">
                    <i class="fa-solid fa-user-circle fa-xl"></i>
                    Xin chào, <strong>@name</strong>
                </div>
            </header>

            <div class="page-content">
                @RenderBody()
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>